@page
@model TennisBruck.Pages.Punch
@{
Layout = null;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Set Work Dates</title>
    <link rel="stylesheet" href="css/punch.css">
</head>
<body>
<div class="container">
    <h1>Set Work Dates for Grieskirchen</h1>
    
    <!-- Form to set date range -->
    <form method="post" asp-page-handler="GenerateDates">
        <label for="startDate">Start Date</label>
        <input id="startDate" type="date" name="startDate" required />
        
        <label for="endDate">End Date</label>
        <input id="endDate" type="date" name="endDate" required />
        
        <button type="submit">Generate Dates</button>
    </form>

    <!-- Display dates as a table with clickable cells -->
    <div class="dates-container">
        <table class="dates-table">
            <thead>
            <tr>
                @foreach (var date in Model.MatchDays)
                {
                    <th>@date.ToString("dd.MM.yyyy")</th>
                }
            </tr>
            </thead>
            <tbody>
            <tr>
                @foreach (var date in Model.MatchDays)
                {
                    <td>
                        <form method="post" asp-page-handler="ToggleWork" style="display:inline;">
                            <input type="hidden" name="matchDay" value="@date.ToString("yyyy-MM-dd")" />
                            <button type="submit" class="work-button @(Model.WorkingDates.Contains(date) ? "assigned" : "")">
                                @(Model.WorkingDates.Contains(date) ? "Assigned" : "Available")
                            </button>
                        </form>
                    </td>
                }
            </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>